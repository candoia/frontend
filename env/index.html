<!doctype html>
<html>
  <head>
    <title>Candoia</title>
    <link rel='stylesheet' type='text/css' href='src/css/font-awesome.min.css'>
    <link rel='stylesheet' type='text/css' href='src/css/work-sans.css'>
    <link rel='stylesheet' type='text/css' href='src/css/scaffolding.css'>
    <link rel='stylesheet' type='text/css' href='src/css/candoia.css'>
  </head>
  <body>
    <div class='panel-container'>
      <div class='panel-left' id='panel-left'>
        <ul id='repo-tree'class='tree'></ul>
        <div class='resize-handle' id='resize-handle'></div>
      </div>
      <div class='panel-right'>
        <h1>Hello World <i class='fa fa-fw fa-camera'></i></h1>
        <div id="shortcut-container">

        </div>
        <webview class='app-container' id='app-container' src='../apps/impactful-commits/main.html' preload='../modules/preload.js' ></webview>
      </div>
    </div>
    <script>
      'use strict';
      let fs = require('fs');
      let bootstrap = require('./src/js/bootstrap');

      for(let appI in bootstrap.appData.apps) {
        let currentApp = bootstrap.appData.apps[appI];
        document.getElementById('shortcut-container').appendChild(document.createElement("a").appendChild(document.createElement("p").appendChild(document.createTextNode(currentApp.name))));
      }

      for(let repoI in bootstrap.appData.repositories) {
        let currentRepo = bootstrap.appData.repositories[repoI];
        let item = document.createElement("li");
        item.innerHTML = `<i class='fa fa-lg fa-fw fa-book'></i> ${currentRepo.name}`
        document.getElementById('repo-tree').appendChild(item);
      }

      let scaff = fs.readFileSync('env/src/css/scaffolding.css', {encoding: 'utf8'});

      var webview = document.getElementById('app-container');

      webview.addEventListener('console-message', function(e) {
        console.log(e.message);
      });

      webview.addEventListener('dom-ready', function() {
        webview.insertCSS(scaff);
        // webview.openDevTools();

      });
    </script>
    <script src='src/js/ui.js'></script>
  </body>
</html>
